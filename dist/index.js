!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("qs")):"function"==typeof define&&define.amd?define(["qs"],t):"object"==typeof exports?exports["social-login"]=t(require("qs")):e["social-login"]=t(e.qs)}(self,(function(e){return(()=>{"use strict";var t={850:t=>{t.exports=e}},o={};function i(e){var r=o[e];if(void 0!==r)return r.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{i.r(r),i.d(r,{handleRedirect:()=>n,handleSocialLogin:()=>c});var e=i(850),t=i.n(e);const o={github:({scope:e,clientId:o,redirectUri:i,state:r})=>`https://github.com/login/oauth/authorize?${t().stringify({client_id:o,scope:e||"user:email",redirect_uri:i||"",state:r})}`,google:({scope:e,clientId:o,redirectUri:i,state:r})=>`https://accounts.google.com/o/oauth2/v2/auth?${t().stringify({include_granted_scopes:!0,response_type:"code",access_type:"offline",client_id:o,scope:`https://www.googleapis.com/auth/${e||"userinfo.profile"}`,redirect_uri:i||"",state:r})}`,facebook:({scope:e,clientId:o,redirectUri:i,state:r})=>`https://www.facebook.com/v10.0/dialog/oauth?${t().stringify({client_id:o,scope:e||"public_profile,email",redirect_uri:i||"",state:r})}`,linkedin:({scope:e,clientId:o,redirectUri:i,state:r})=>`https://www.linkedin.com/oauth/v2/authorization?${t().stringify({response_type:"code",client_id:o,scope:encodeURI(e||"r_liteprofile"),redirect_uri:i||"",state:r})}`},s=({provider:e,...t})=>o[e](t),n=()=>{const{error:e,errorMessage:o="Login failed. Please try again.",state:i,code:r,linkedin_redirect_url:s}=t().parse(window.location.search);if(i&&i.includes("native")){const[,e]=i.split("-");window.location.href=e+window.location.search}else(e||r)&&(window.opener&&window.opener.postMessage({...e?{state:i,error:e,errorMessage:o}:{state:i,code:r},from:"projectium.network"},window.location.origin),"user_cancelled_login"===e&&window.close()),s&&(window.location.href=s)},c=({provider:e,scope:o,clientId:i,redirectUri:r,state:n,onSuccess:c=(()=>{}),onFailure:a=(()=>{})})=>()=>{(class{constructor({uri:e,onSuccess:t,onFailure:o}){this.uri=e,this.onSuccess=t,this.onFailure=o}static open(...e){const t=new this(...e);return t.open(),t}open(){window.removeEventListener("message",this.receiveMessage,!1),this.popup&&this.popup.close(),this.popup=window.open(this.uri,"_blank",(({width:e=600,height:t=740}={})=>Object.entries({left:window.screen.width/2-e/2,top:window.screen.height/2-t/2,width:e,height:t}).map((([e,t])=>`${e}=${t}`)).join(","))()),window.addEventListener("message",this.receiveMessage,!1)}receiveMessage=e=>{const{origin:o,data:i}=e,{state:r}=t().parse(this.uri.split("?")[1]);if(o===window.location.origin){if(r&&i.state!==r)return void(this.popup&&this.popup.close());i.errorMessage&&"projectium.network"===i.from?this.onFailure(e.data):i.code&&"projectium.network"===i.from&&this.onSuccess({code:e.data.code}),this.popup&&this.popup.close()}}}).open({uri:s({provider:e,scope:o,clientId:i,redirectUri:r,state:n||Math.random().toString(32)}),onSuccess:c,onFailure:a})}})(),r})()}));
//# sourceMappingURL=index.js.map